from flask import Flask, render_template, request, jsonify
import threading
import subprocess
import time

app = Flask(__name__)

# Function to run app.py and capture logs
def run_app():
    process = subprocess.Popen(['python', 'app.py'], stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
    while True:
        output = process.stdout.readline()
        if output == b'' and process.poll() is not None:
            break
        if output:
            app.logger.info(output.decode().strip())

@app.route('/')
def index():
    return render_template('index.html')

if __name__ == '__main__':
    log_thread = threading.Thread(target=run_app)
    log_thread.start()
    app.run(debug=True, threaded=True)
